webpackJsonp([76],{"4hhz":function(e,i,n){"use strict";var t=n("HxWs"),o=n.n(t),a=n("2dV3"),s=n.n(a),d=n("ItWh"),l=n("7AOZ"),c=n.n(l),w=n("7nhF"),r=(n.n(w),n.i(d.default)("user-metrics-data")),m=w.getCookie("csrftoken"),h={loadTime:(new Date).getTime(),itemsClicked:[],scrollDistance:0,windowSize:{width:0,height:0},keysPressed:0},u=0,p=null,g=r.remoteAddr,f=null,k=function(){var e=r.institutionDomainPath+window.location.pathname;"/"===e.charAt(0)&&(e=e.slice(1));var i=window.location.search;0!==i.length&&(e+=i);var n=(new Date).getTime(),t=n-h.loadTime-u,a={path:e,data:o()({remoteAddress:g,hostname:window.location.host,loadTime:h.loadTime,unloadTime:n,activeTime:t,inactiveTime:u,itemsClicked:h.itemsClicked,scrollDistance:h.scrollDistance+h.windowSize.height,windowSize:h.windowSize,keysPressed:h.keysPressed})},d=!1;if(navigator.sendBeacon){a.csrfmiddlewaretoken=m;var l=new Blob([c.a.param(a)],{type:"application/x-www-form-urlencoded"});d=navigator.sendBeacon("/api/save-metric/pageLeave/",l),a.csrfmiddlewaretoken=void 0}d||s.a.post("save-metric/pageLeave/",a,{async:!1}).done(function(){h.loadTime=Date.now(),h.itemsClicked=[],h.scrollDistance=0,h.windowSize={width:0,height:0},h.keysPressed=0,u=0,p=null,f&&(clearTimeout(f),f=null)})};c()(document).scroll(function(){h.scrollDistance=Math.max(h.scrollDistance,c()(document).scrollTop())}).keypress(function(){h.keysPressed++}),c()(window).load(function(){h.windowSize.width=c()(window).width(),h.windowSize.height=c()(window).height(),f&&clearTimeout(f),f=setTimeout(k,18e5)}),c()(window).resize(function(){h.windowSize.width=c()(window).width(),h.windowSize.height=c()(window).height()}),c()(window).on("click",function(e){var i=c()(e.target),n=i[0].className,t=[];""!==n&&n.split&&(t=n.split(/\s+/)),h.itemsClicked.push({id:i.attr("id"),name:i.prop("nodeName"),classes:t,x:e.pageX,y:e.pageY,time:(new Date).getTime()-h.loadTime})}).on("focus",function(){var e=Date.now();null!==p&&(u+=e-p),p=null}).on("blur",function(){p=(new Date).getTime()}).on("unload",k)},KC5y:function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});n("D+EU"),n("4hhz")}},["KC5y"]);
//# sourceMappingURL=metrics.1e407a2dde69bac5ca2f.js.map